<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FEAR - Inspired by Gods, Built for Warriors</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script>
        // Set theme on initial load to prevent flash of wrong theme
        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
        // Configure Tailwind to enable dark mode via 'class' strategy
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        'cinzel': ['Cinzel', 'serif'],
                        'inter': ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; transition: background-color 0.3s ease, color 0.3s ease; }
        h1, h2, h3, h4, h5, h6 { font-family: 'Cinzel', serif; font-weight: 700; }
        .hero-section { background-image: url('assets/hero section.png'); background-size: cover; background-position: center; background-repeat: no-repeat; }
        .product-card { transition: all 0.3s ease-in-out; position: relative; overflow: hidden; border: 2px solid transparent; }
        .product-card:hover { transform: translateY(-10px); border-color: #FFD700; box-shadow: 0 0 25px rgba(255, 215, 0, 0.5), 0 0 50px rgba(255, 215, 0, 0.3); }
    </style>
</head>
<body class="bg-white text-gray-900 dark:bg-gray-900 dark:text-gray-100">

    <div id="main-content">
        <header class="bg-white/80 dark:bg-gray-900/80 backdrop-blur-sm sticky top-0 z-50 shadow-md dark:shadow-yellow-500/10">
            <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
                <div>
                    <a href="#home">
                        <img src="assets/fear.png" alt="Fear Logo" class="h-14 md:h-16 block dark:hidden">
                        <img src="assets/fear1.png" alt="Fear Logo" class="h-14 md:h-16 hidden dark:block">
                    </a>
                </div>
                <div class="hidden md:flex space-x-8 items-center">
                    <a href="#home" class="text-gray-700 dark:text-gray-300 hover:text-yellow-500 dark:hover:text-yellow-400 transition duration-300">Home</a>
                    <a href="#about" class="text-gray-700 dark:text-gray-300 hover:text-yellow-500 dark:hover:text-yellow-400 transition duration-300">About Fear</a>
                    <a href="#shop" class="text-gray-700 dark:text-gray-300 hover:text-yellow-500 dark:hover:text-yellow-400 transition duration-300">Shop</a>
                    <a href="#apparel" class="text-gray-700 dark:text-gray-300 hover:text-yellow-500 dark:hover:text-yellow-400 transition duration-300">Apparel</a>
                    <a href="#community" class="text-gray-700 dark:text-gray-300 hover:text-yellow-500 dark:hover:text-yellow-400 transition duration-300">Warriors</a>
                    <a href="#knowledge" class="text-gray-700 dark:text-gray-300 hover:text-yellow-500 dark:hover:text-yellow-400 transition duration-300">Knowledge</a>
                    <button id="login-btn" class="text-gray-700 dark:text-gray-300 hover:text-yellow-500 dark:hover:text-yellow-400 transition duration-300">Login</button>
                    <button id="signup-btn" class="bg-yellow-500 text-black py-2 px-4 rounded-lg hover:bg-yellow-400 dark:hover:bg-yellow-600 transition duration-300 font-bold">Sign Up</button>
                    <div id="user-menu" class="hidden relative">
                      <button id="user-menu-btn" class="flex items-center space-x-2 text-gray-700 dark:text-gray-300 hover:text-yellow-500 dark:hover:text-yellow-400 transition duration-300">
                          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                          </svg>
                          <span id="user-name">User</span>
                      </button>
                      <div id="user-dropdown" class="hidden absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700">
                          <a href="#" id="my-orders" class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">My Orders</a>
                          <a href="#" id="logout-btn" class="block w-full text-left px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">Logout</a>
                      </div>
                  </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div id="cart-icon" class="relative cursor-pointer text-gray-600 dark:text-gray-300 hover:text-yellow-500 dark:hover:text-yellow-400 transition-colors duration-300">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5-6m0 0h15M17 21a2 2 0 100-4 2 2 0 000 4zM9 21a2 2 0 100-4 2 2 0 000 4z"></path></svg>
                        <span id="cart-count" class="absolute -top-2 -right-2 bg-yellow-500 text-black text-xs rounded-full h-5 w-5 flex items-center justify-center hidden">0</span>
                    </div>
                    <button id="theme-toggle" class="text-gray-600 dark:text-gray-300 hover:text-yellow-500 dark:hover:text-yellow-400 focus:outline-none transition-colors duration-300">
                        <svg id="theme-icon-sun" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                        <svg id="theme-icon-moon" class="w-6 h-6 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                    </button>
                    <div class="md:hidden">
                        <button id="mobile-menu-button" class="text-gray-700 dark:text-gray-300 focus:outline-none">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                        </button>
                    </div>
                </div>
            </nav>
             <div id="mobile-menu" class="hidden md:hidden bg-white/95 dark:bg-gray-800/95">
                <a href="#home" class="block py-2 px-4 text-sm hover:bg-gray-100 dark:hover:bg-gray-700">Home</a>
                <a href="#about" class="block py-2 px-4 text-sm hover:bg-gray-100 dark:hover:bg-gray-700">About Fear</a>
                <a href="#shop" class="block py-2 px-4 text-sm hover:bg-gray-100 dark:hover:bg-gray-700">Shop</a>
                <a href="#apparel" class="block py-2 px-4 text-sm hover:bg-gray-100 dark:hover:bg-gray-700">Apparel</a>
                <a href="#community" class="block py-2 px-4 text-sm hover:bg-gray-100 dark:hover:bg-gray-700">Warriors</a>
                <a href="#knowledge" class="block py-2 px-4 text-sm hover:bg-gray-100 dark:hover:bg-gray-700">Knowledge</a>
                <button id="mobile-login" class="block py-2 px-4 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 w-full text-left">Login</button>
                <button id="mobile-signup" class="block py-2 px-4 text-sm hover:bg-gray-100 dark:hover:bg-gray-700 w-full text-left">Sign Up</button>
            </div>
        </header>

        <main>
            <section id="home" class="hero-section h-screen flex items-center justify-center text-center relative bg-gray-800">
                 <div class="absolute inset-0 bg-black/60"></div>
                <div class="relative z-10 p-6">
                    <h1 class="text-4xl md:text-6xl lg:text-7xl font-extrabold uppercase tracking-widest text-white" style="text-shadow: 2px 2px 10px rgba(0,0,0,0.8);">
                        For Those Who Embrace Fear
                    </h1>
                </div>
            </section>

            <section id="about" class="py-20 md:py-32 bg-slate-50 dark:bg-gray-800">
                <div class="container mx-auto px-6 text-center">
                    <div class="max-w-4xl mx-auto">
                        <div class="p-8 md:p-16 rounded-lg">
                             <h2 class="text-3xl md:text-5xl mb-6 text-stone-800 dark:text-amber-100">Fear is the Weapon</h2>
                             <p class="text-lg md:text-xl leading-relaxed text-stone-700 dark:text-amber-50 italic">
                                 "Fear is not weakness, Fear is the weapon. Inspired by the Gods, built for the modern warriors."
                             </p>
                        </div>
                    </div>
                </div>
            </section>

            <section id="shop" class="py-20 md:py-32 bg-white dark:bg-gray-900">
                <div class="container mx-auto px-6">
                    <h2 class="text-4xl md:text-5xl text-center mb-12 uppercase text-gray-900 dark:text-gray-100">Fuel for the Gods</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
                        <div class="product-card bg-slate-50 dark:bg-gray-800 rounded-lg p-6 text-center group shadow-md dark:shadow-2xl">
                            <img src="assets/product.png" alt="Zeus Whey" class="mx-auto h-40 mb-4 rounded-full border-4 border-gray-300 dark:border-gray-600 group-hover:border-yellow-400 transition-colors duration-300">
                            <h3 class="text-2xl mb-2 text-yellow-600 dark:text-yellow-400">Zeus Whey</h3>
                            <div class="mt-4">
                                <p class="text-xl font-bold text-gray-900 dark:text-white mb-3">‚Çπ2,999</p>
                                <button onclick="addToCart('zeus-whey')" class="w-full bg-yellow-500 text-black py-2 px-4 rounded-lg font-bold hover:bg-yellow-400 transition duration-300">Add to Cart</button>
                            </div>
                        </div>
                        <div class="product-card bg-slate-50 dark:bg-gray-800 rounded-lg p-6 text-center group shadow-md dark:shadow-2xl">
                            <img src="assets/product.png" alt="Ares Pre-workout" class="mx-auto h-40 mb-4 rounded-full border-4 border-gray-300 dark:border-gray-600 group-hover:border-yellow-400 transition-colors duration-300">
                            <h3 class="text-2xl mb-2 text-yellow-600 dark:text-yellow-400">Ares Pre-workout</h3>
                            <div class="mt-4">
                                <p class="text-xl font-bold text-gray-900 dark:text-white mb-3">‚Çπ1,999</p>
                                <button onclick="addToCart('ares-preworkout')" class="w-full bg-yellow-500 text-black py-2 px-4 rounded-lg font-bold hover:bg-yellow-400 transition duration-300">Add to Cart</button>
                            </div>
                        </div>
                        <div class="product-card bg-slate-50 dark:bg-gray-800 rounded-lg p-6 text-center group shadow-md dark:shadow-2xl">
                            <img src="assets/product.png" alt="Athena Focus" class="mx-auto h-40 mb-4 rounded-full border-4 border-gray-300 dark:border-gray-600 group-hover:border-yellow-400 transition-colors duration-300">
                            <h3 class="text-2xl mb-2 text-yellow-600 dark:text-yellow-400">Athena Focus</h3>
                            <div class="mt-4">
                                <p class="text-xl font-bold text-gray-900 dark:text-white mb-3">‚Çπ1,799</p>
                                <button onclick="addToCart('athena-focus')" class="w-full bg-yellow-500 text-black py-2 px-4 rounded-lg font-bold hover:bg-yellow-400 transition duration-300">Add to Cart</button>
                            </div>
                        </div>
                        <div class="product-card bg-slate-50 dark:bg-gray-800 rounded-lg p-6 text-center group shadow-md dark:shadow-2xl">
                             <img src="assets/merchandise.png" alt="The Olympian Tee" class="mx-auto h-40 mb-4 rounded-lg border-4 border-gray-300 dark:border-gray-600 group-hover:border-yellow-400 transition-colors duration-300">
                            <h3 class="text-2xl mb-2 text-yellow-600 dark:text-yellow-400">The Olympian Tee</h3>
                            <div class="mt-4">
                                <p class="text-xl font-bold text-gray-900 dark:text-white mb-3">‚Çπ1,999</p>
                                <button onclick="addToCart('olympian-tee')" class="w-full bg-yellow-500 text-black py-2 px-4 rounded-lg font-bold hover:bg-yellow-400 transition duration-300">Add to Cart</button>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="apparel" class="py-20 md:py-32 bg-slate-50 dark:bg-gray-800">
                <div class="container mx-auto px-6">
                    <h2 class="text-4xl md:text-5xl text-center mb-12 uppercase text-gray-900 dark:text-gray-100">Wear The Mark of a Warrior</h2>
                    <div class="max-w-5xl mx-auto flex flex-col md:flex-row items-center gap-8 md:gap-12 bg-white dark:bg-gray-900 p-8 rounded-lg shadow-xl">
                        <div class="md:w-1/2">
                            <img src="assets/merchandise.png" alt="FEAR - The Olympian Tee" class="rounded-lg w-full">
                        </div>
                        <div class="md:w-1/2 text-center md:text-left">
                            <h3 class="text-3xl md:text-4xl mb-4 text-yellow-600 dark:text-yellow-400">The Olympian Tee</h3>
                            <p class="text-gray-600 dark:text-gray-400 mb-6 leading-relaxed">
                                Forged for comfort, designed for the relentless. This isn't just a t-shirt; it's a statement. Show the world you conquer fear, both in the gym and out.
                            </p>
                            <div class="mb-6">
                                <span class="text-4xl font-bold text-gray-900 dark:text-white">‚Çπ1,999</span>
                                <span class="text-lg text-gray-500 line-through ml-2">‚Çπ2,499</span>
                            </div>
                            <button onclick="addToCart('olympian-tee')" class="w-full md:w-auto bg-yellow-500 text-black py-3 px-8 rounded-lg font-bold hover:bg-yellow-400 dark:hover:bg-yellow-600 transition duration-300 text-lg uppercase">
                                Add to Cart
                            </button>
                        </div>
                    </div>
                </div>
            </section>

            <section id="community" class="py-20 md:py-32 bg-white dark:bg-gray-900">
                <div class="container mx-auto px-6">
                    <h2 class="text-4xl md:text-5xl text-center mb-4 uppercase text-gray-900 dark:text-gray-100">Warriors of Olympus</h2>
                    <p class="text-center text-lg text-gray-600 dark:text-gray-400 mb-12">Modern warriors who embraced Fear.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                        <div class="bg-slate-50 dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700 transform hover:scale-105 transition-transform duration-300 shadow-lg">
                            <img src="assets/wrestler.jpeg" alt="Photo of a warrior" class="w-24 h-24 rounded-full mx-auto mb-4 border-4 border-yellow-500 object-cover">
                            <p class="text-gray-700 dark:text-gray-300 italic mb-4">"With Ares Pre-workout, I shattered my personal bests. I feel unstoppable."</p>
                            <h4 class="text-center text-yellow-600 dark:text-yellow-400 font-bold">- Alex 'The Titan' Johnson</h4>
                        </div>
                        <div class="bg-slate-50 dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700 transform hover:scale-105 transition-transform duration-300 shadow-lg">
                            <img src="assets/wrestler.jpeg" alt="Photo of a warrior" class="w-24 h-24 rounded-full mx-auto mb-4 border-4 border-yellow-500 object-cover">
                            <p class="text-gray-700 dark:text-gray-300 italic mb-4">"Athena Focus is my secret weapon for long study sessions. The clarity is insane."</p>
                            <h4 class="text-center text-yellow-600 dark:text-yellow-400 font-bold">- Maya Chen</h4>
                        </div>
                        <div class="bg-slate-50 dark:bg-gray-800 p-6 rounded-lg border border-gray-200 dark:border-gray-700 transform hover:scale-105 transition-transform duration-300 shadow-lg">
                            <img src="assets/wrestler.jpeg" alt="Photo of a warrior" class="w-24 h-24 rounded-full mx-auto mb-4 border-4 border-yellow-500 object-cover">
                            <p class="text-gray-700 dark:text-gray-300 italic mb-4">"The brand's message is everything. It's more than supplements, it's a mindset."</p>
                            <h4 class="text-center text-yellow-600 dark:text-yellow-400 font-bold">- David Rodriguez</h4>
                        </div>
                    </div>
                </div>
            </section>

            <section id="knowledge" class="py-20 md:py-32 bg-slate-50 dark:bg-gray-800">
                <div class="container mx-auto px-6 text-center">
                    <h2 class="text-4xl md:text-5xl mb-12 uppercase text-gray-900 dark:text-gray-100">The Oracles' Knowledge</h2>
                    <div class="max-w-3xl mx-auto space-y-6">
                        <a href="#" class="block bg-white dark:bg-gray-900 p-8 rounded-lg text-left hover:bg-gray-100 dark:hover:bg-gray-700 border border-gray-200 dark:border-gray-700 hover:border-yellow-500 dark:hover:border-yellow-500 transition-all duration-300 shadow-md">
                            <h3 class="text-2xl text-yellow-600 dark:text-yellow-400 mb-2">Secrets of Spartan Training</h3>
                            <p class="text-gray-600 dark:text-gray-400">Discover the ancient principles of discipline and strength that forged the world's most feared warriors.</p>
                        </a>
                        <a href="#" class="block bg-white dark:bg-gray-900 p-8 rounded-lg text-left hover:bg-gray-100 dark:hover:bg-gray-700 border border-gray-200 dark:border-gray-700 hover:border-yellow-500 dark:hover:border-yellow-500 transition-all duration-300 shadow-md">
                            <h3 class="text-2xl text-yellow-600 dark:text-yellow-400 mb-2">Fuel Like Hercules</h3>
                            <p class="text-gray-600 dark:text-gray-400">Learn about the divine nutrition that powered the demigod's legendary twelve labors.</p>
                        </a>
                    </div>
                </div>
            </section>
            <section id="contact" class="py-20 md:py-32 bg-white dark:bg-gray-900">
              <div class="container mx-auto px-6">
                  <h2 class="text-4xl md:text-5xl text-center mb-12 uppercase text-gray-900 dark:text-gray-100">Enter the Pantheon</h2>
                  <div class="max-w-2xl mx-auto bg-slate-50 dark:bg-gray-800 p-8 md:p-12 rounded-lg temple-gate shadow-lg dark:shadow-2xl">
                      <form>
                          <div class="mb-6">
                              <label for="name" class="block text-yellow-600 dark:text-yellow-400 mb-2">Your Name</label>
                              <input type="text" id="name" name="name" class="w-full bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 p-3 rounded-lg border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all">
                          </div>
                          <div class="mb-6">
                              <label for="email" class="block text-yellow-600 dark:text-yellow-400 mb-2">Your Email</label>
                              <input type="email" id="email" name="email" class="w-full bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 p-3 rounded-lg border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all">
                          </div>
                          <div class="mb-6">
                              <label for="message" class="block text-yellow-600 dark:text-yellow-400 mb-2">Your Message</label>
                              <textarea id="message" name="message" rows="4" class="w-full bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 p-3 rounded-lg border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-yellow-500 transition-all"></textarea>
                          </div>
                          <button type="submit" class="w-full bg-yellow-500 text-black py-3 px-6 rounded-lg font-bold hover:bg-yellow-400 dark:hover:bg-yellow-600 transition duration-300 text-lg uppercase">
                              Join the Ranks
                          </button>
                      </form>
            <div class="admin-container">
                <!-- Sidebar -->
                <div class="admin-sidebar">
                    <div class="admin-sidebar-header">
                        <img src="assets/fear1.png" alt="Fear Logo" style="height: 40px; margin-bottom: 0.5rem;">
                        <h2 style="margin: 0; font-size: 1.25rem;">Admin Panel</h2>
                          </a>
                    <nav class="admin-sidebar-nav">
                        <button class="admin-nav-item active" onclick="showAdminTab('dashboard')">
                            üìä Dashboard
                        </button>
                        <button class="admin-nav-item" onclick="showAdminTab('orders')">
                            üì¶ Orders
                        </button>
                        <button class="admin-nav-item" onclick="showAdminTab('users')">
                            üë• Users
                        </button>
                        <button class="admin-nav-item" onclick="showAdminTab('products')">
                            üõçÔ∏è Products
                        </button>
                        <button class="admin-nav-item" onclick="showAdminTab('enquiries')">
                            üìß Enquiries
                        </button>
                        <hr style="border-color: #374151; margin: 1rem 0;">
                        <button class="admin-nav-item" onclick="window.location.href='/'">
                            ‚Üê Back to Store
                        </button>
                        <button class="admin-nav-item" onclick="adminLogout()">
                            üö™ Logout
                        </button>
                    </nav>
                </div>
                
                <!-- Main Content -->
                <div class="admin-main">
                    <div class="admin-header">
                        <h1 id="adminPageTitle">Dashboard</h1>
                          <a href="#" class="text-gray-500 dark:text-gray-400 hover:text-yellow-500 dark:hover:text-yellow-400 transition-colors duration-300">
                    
                    <!-- Dashboard -->
                    <div id="admin-dashboard" class="admin-tab-content">
                        <div class="stats-grid">
                            <div class="stat-card">
                                <div class="stat-value" id="totalOrders">0</div>
                                <div class="stat-label">Total Orders</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="totalRevenue">‚Çπ0</div>
                                <div class="stat-label">Total Revenue</div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-value" id="totalUsers">0</div>
                                <div class="stat-label">Total Users</div>
                            </div>
                            <div class="stat-card">
                        html = '<p style="text-align: center; color: #6b7280; padding: 2rem;">No enquiries found.</p>';
                                <div class="stat-label">Total Enquiries</div>
                        html = '<table class="data-table">';
                        html += '<thead><tr><th>Name</th><th>Email</th><th>Message</th><th>Status</th><th>Date</th></tr></thead><tbody>';
                        
                        <div class="admin-content">
                            <h3>Recent Activity</h3>
                            <div id="recentActivity">
                                <div class="loading">Loading recent activity...</div>
                            </div>
                        </div>
            </div>
                    
                    <!-- Orders -->
                    <div id="admin-orders" class="admin-tab-content" style="display: none;">
                        <div class="admin-content">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                <h3>Order Management</h3>
                                <button onclick="loadOrders()" class="btn-sm btn-primary">Refresh</button>
                            <label for="card-number" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Card Number</label>
                            <div id="ordersTable">
                                <div class="loading">Loading orders...</div>
                            <label for="card-name" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Name on Card</label>
                        </div>
                    </div>
                    
                    <!-- Users -->
                    <div id="admin-users" class="admin-tab-content" style="display: none;">
                        <div class="admin-content">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                <h3>User Management</h3>
                                <button onclick="loadUsers()" class="btn-sm btn-primary">Refresh</button>
                            <div class="flex-1">
                            <div id="usersTable">
                                <div class="loading">Loading users...</div>
                            <div class="flex-1">
                                <label for="cvv" class="block text-sm font-medium text-gray-700 dark:text-gray-300">CVV</label>
                    </div>
                    
                    <!-- Products -->
                    <div id="admin-products" class="admin-tab-content" style="display: none;">
                        <div class="admin-content">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                <h3>Product Management</h3>
                                <button onclick="loadProducts()" class="btn-sm btn-primary">Refresh</button>
                            </div>
                            <div id="productsTable">
                                <div class="loading">Loading products...</div>
                            </div>
                        <button type="submit" class="w-full bg-yellow-500 text-black py-3 px-4 rounded-lg font-bold hover:bg-yellow-400 transition duration-300">Pay Now</button>
                    </div>
                    
                    <!-- Enquiries -->
                    <div id="admin-enquiries" class="admin-tab-content" style="display: none;">
                        <div class="admin-content">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                <h3>Enquiry Management</h3>
                                <button onclick="loadEnquiries()" class="btn-sm btn-primary">Refresh</button>
                            </div>
                            <div id="enquiriesTable">
                                <div class="loading">Loading enquiries...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="auth-modal" class="fixed inset-0 bg-black bg-opacity-50 z-[60] hidden">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white dark:bg-gray-800 rounded-lg max-w-md w-full">
                <div class="flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700">
                    <h2 id="auth-modal-title" class="text-2xl font-bold text-yellow-600 dark:text-yellow-400">Login</h2>
                    <button id="close-auth-modal" class="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button>
                </div>
                <div class="p-6">
                    <form id="login-form" class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-2">Email</label>
                            <input type="email" id="login-email" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Password</label>
                            <input type="password" id="login-password" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700" required>
                        </div>
                        <button type="submit" class="w-full bg-yellow-500 text-black py-3 rounded-lg font-bold hover:bg-yellow-400 transition duration-300">Login</button>
                        <p class="text-center text-sm text-gray-600 dark:text-gray-400">Don't have an account? <button type="button" id="switch-to-signup" class="text-yellow-600 dark:text-yellow-400 hover:underline">Sign up</button></p>
                    </form>
                    <form id="signup-form" class="space-y-4 hidden">
                        <div>
                            <label class="block text-sm font-medium mb-2">Full Name</label>
                            <input type="text" id="signup-name" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Email</label>
                            <input type="email" id="signup-email" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2">Password</label>
                            <input type="password" id="signup-password" class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700" required>
                        </div>
                        <button type="submit" class="w-full bg-yellow-500 text-black py-3 rounded-lg font-bold hover:bg-yellow-400 transition duration-300">Sign Up</button>
                        <p class="text-center text-sm text-gray-600 dark:text-gray-400">Already have an account? <button type="button" id="switch-to-login" class="text-yellow-600 dark:text-yellow-400 hover:underline">Login</button></p>
                    </form>
                </div>
            </div>
        </div>
    </div>
    
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Check if we're on admin route
        if (window.location.pathname === '/admin') {
            showAdminPanel();
            return;
        }
        
        // --- DATA & STATE ---
        const products = {
            'zeus-whey': { name: 'Zeus Whey', price: 2999, image: 'assets/product.png' },
            'ares-preworkout': { name: 'Ares Pre-workout', price: 1999, image: 'assets/product.png' },
            'athena-focus': { name: 'Athena Focus', price: 1799, image: 'assets/product.png' },
            'olympian-tee': { name: 'The Olympian Tee', price: 1999, image: 'assets/merchandise.png' }
        };
        let cart = [];

        // --- DOM ELEMENTS ---
        const mainContent = document.getElementById('main-content');
        const paymentPage = document.getElementById('payment-page');
        const cartIcon = document.getElementById('cart-icon');
        const cartModal = document.getElementById('cart-modal');
        const closeCartBtn = document.getElementById('close-cart-btn');
        const continueShoppingBtn = document.getElementById('continue-shopping-btn');
        const checkoutBtn = document.getElementById('checkout-btn');
        const backToShopBtn = document.getElementById('back-to-shop-btn');
        const paymentForm = document.getElementById('payment-form');
        const themeToggleButton = document.getElementById('theme-toggle');
        const sunIcon = document.getElementById('theme-icon-sun');
        const moonIcon = document.getElementById('theme-icon-moon');
        const authModal = document.getElementById('auth-modal');
        const authModalTitle = document.getElementById('auth-modal-title');
        const loginForm = document.getElementById('login-form');
        const signupForm = document.getElementById('signup-form');
        const loginBtn = document.getElementById('login-btn');
        const signupBtn = document.getElementById('signup-btn');
        const mobileLogin = document.getElementById('mobile-login');
        const mobileSignup = document.getElementById('mobile-signup');
        const closeAuthModal = document.getElementById('close-auth-modal');
        const switchToSignup = document.getElementById('switch-to-signup');
        const switchToLogin = document.getElementById('switch-to-login');
        const userMenu = document.getElementById('user-menu');
        const userMenuBtn = document.getElementById('user-menu-btn');
        const userDropdown = document.getElementById('user-dropdown');
        const logoutBtn = document.getElementById('logout-btn');
        const userName = document.getElementById('user-name');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileMenu = document.getElementById('mobile-menu');
        
        // --- FUNCTIONS ---
        
        const updateCartDisplay = () => {
            const cartCountElement = document.getElementById('cart-count');
            const cartItemsContainer = document.getElementById('cart-items');
            const cartTotalElement = document.getElementById('cart-total');
            const totalCount = cart.reduce((sum, item) => sum + item.quantity, 0);
            const totalPrice = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
            cartCountElement.textContent = totalCount;
            cartCountElement.style.display = totalCount > 0 ? 'flex' : 'none';
            cartTotalElement.textContent = `‚Çπ${totalPrice.toLocaleString('en-IN')}`;
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = '<p class="text-gray-500 dark:text-gray-400">Your cart is empty.</p>';
            } else {
                cartItemsContainer.innerHTML = cart.map(item => `
                    <div class="flex justify-between items-center py-4 border-b dark:border-gray-700 last:border-b-0">
                        <div class="flex items-center space-x-4">
                            <img src="${products[item.id].image}" alt="${item.name}" class="w-16 h-16 rounded object-cover">
                            <div>
                                <p class="font-bold">${item.name}</p>
                                <p class="text-sm text-gray-600 dark:text-gray-400">Qty: ${item.quantity}</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-4">
                           <p class="font-bold">‚Çπ${(item.price * item.quantity).toLocaleString('en-IN')}</p>
                           <button onclick="removeFromCart('${item.id}')" class="text-red-500 hover:text-red-700 text-2xl font-bold leading-none p-1" title="Remove item">&times;</button>
                        </div>
                    </div>`).join('');
            }
        }

        const showNotification = (message, type = 'success') => {
            const notification = document.createElement('div');
            const bgColor = type === 'error' ? 'bg-red-500' : 'bg-yellow-500';
            notification.className = `fixed top-5 right-5 ${bgColor} text-black px-6 py-3 rounded-lg shadow-lg z-[100] transform translate-x-[120%] transition-transform duration-300`;
            notification.textContent = message;
            document.body.appendChild(notification);
            setTimeout(() => notification.classList.remove('translate-x-[120%]'), 100);
            setTimeout(() => {
                notification.classList.add('translate-x-[120%]');
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        window.addToCart = (productId) => {
            const product = products[productId];
            if (!product) return;
            const existingItem = cart.find(item => item.id === productId);
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ id: productId, name: product.name, price: product.price, quantity: 1 });
            }
            updateCartDisplay();
            showNotification(`${product.name} added to cart!`);
            localStorage.setItem('fearCart', JSON.stringify(cart));
        }

        window.removeFromCart = (productId) => {
            cart = cart.filter(item => item.id !== productId);
            updateCartDisplay();
            showNotification(`Item removed from cart.`);
            localStorage.setItem('fearCart', JSON.stringify(cart));
        }
        
        const showPaymentPage = () => {
            mainContent.classList.add('hidden');
            paymentPage.classList.remove('hidden');
        }

        const showShopPage = () => {
            mainContent.classList.remove('hidden');
            paymentPage.classList.add('hidden');
        }

        const updateThemeIcon = () => {
            const isDark = document.documentElement.classList.contains('dark');
            sunIcon.classList.toggle('hidden', isDark);
            moonIcon.classList.toggle('hidden', !isDark);
        };
        
        function showAuthModal(mode) {
            authModal.classList.remove('hidden');
            authModalTitle.textContent = mode === 'login' ? 'Login' : 'Sign Up';
            loginForm.classList.toggle('hidden', mode !== 'login');
            signupForm.classList.toggle('hidden', mode === 'login');
        }

        function updateAuthState() {
            const user = JSON.parse(localStorage.getItem('fearUser'));
            const isLoggedIn = !!user;
            loginBtn.classList.toggle('hidden', isLoggedIn);
            signupBtn.classList.toggle('hidden', isLoggedIn);
            userMenu.classList.toggle('hidden', !isLoggedIn);
            if (isLoggedIn) {
                userName.textContent = user.name;
            }
        }

        // --- EVENT LISTENERS ---
        themeToggleButton.addEventListener('click', () => {
            document.documentElement.classList.toggle('dark');
            localStorage.theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';
            updateThemeIcon();
        });

        // Cart Modal Listeners
        cartIcon.addEventListener('click', () => cartModal.classList.remove('hidden'));
        closeCartBtn.addEventListener('click', () => cartModal.classList.add('hidden'));
        continueShoppingBtn.addEventListener('click', () => cartModal.classList.add('hidden'));
        cartModal.addEventListener('click', (e) => {
            if (e.target === cartModal) cartModal.classList.add('hidden');
        });
        
        checkoutBtn.addEventListener('click', () => {
            if (cart.length === 0) {
                showNotification('Your cart is empty!', 'error');
                return;
            }
            cartModal.classList.add('hidden');
            showPaymentPage();
        });
        
        // Payment Page Listeners
        backToShopBtn.addEventListener('click', showShopPage);
        paymentForm.addEventListener('submit', (e) => {
            e.preventDefault();
            showNotification('Payment successful! Thank you for your order.');
            cart = [];
            localStorage.removeItem('fearCart');
            updateCartDisplay();
            showShopPage();
        });
        
        // Auth Listeners
        loginBtn.addEventListener('click', () => showAuthModal('login'));
        signupBtn.addEventListener('click', () => showAuthModal('signup'));
        mobileLogin.addEventListener('click', () => showAuthModal('login'));
        mobileSignup.addEventListener('click', () => showAuthModal('signup'));
        switchToLogin.addEventListener('click', () => showAuthModal('login'));
        switchToSignup.addEventListener('click', () => showAuthModal('signup'));
        closeAuthModal.addEventListener('click', () => authModal.classList.add('hidden'));
        authModal.addEventListener('click', (e) => { if(e.target === authModal) authModal.classList.add('hidden') });

        loginForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const user = { name: "Warrior" }; // Mock login
            localStorage.setItem('fearUser', JSON.stringify(user));
            updateAuthState();
            authModal.classList.add('hidden');
            showNotification('Login successful! Welcome back!');
        });
        
        signupForm.addEventListener('submit', (e) => {
            e.preventDefault();
            const name = signupForm.querySelector('#signup-name').value || "New Warrior";
            const user = { name: name };
            localStorage.setItem('fearUser', JSON.stringify(user));
            updateAuthState();
            authModal.classList.add('hidden');
            showNotification('Registration successful! Welcome to FEAR!');
        });
        
        userMenuBtn.addEventListener('click', (e) => {
            e.stopPropagation();
            userDropdown.classList.toggle('hidden');
        });

        logoutBtn.addEventListener('click', () => {
            localStorage.removeItem('fearUser');
            updateAuthState();
            userDropdown.classList.add('hidden');
            showNotification('Logged out successfully');
        });
        
        document.addEventListener('click', (e) => {
            if (!userMenu.contains(e.target)) userDropdown.classList.add('hidden');
        });

        // Mobile Menu Listener
        mobileMenuButton.addEventListener('click', () => {
            mobileMenu.classList.toggle('hidden');
        });
        
        // --- INITIALIZATION ---
        const savedCart = localStorage.getItem('fearCart');
        if (savedCart) {
            cart = JSON.parse(savedCart);
        }
        updateThemeIcon();
        updateAuthState();
        updateCartDisplay();
        
        // Admin Panel Functions
        function showAdminPanel() {
            document.getElementById('main-content').style.display = 'none';
            document.getElementById('payment-page').style.display = 'none';
            
            // Create admin panel if it doesn't exist
            let adminPanel = document.getElementById('admin-panel');
            if (!adminPanel) {
                adminPanel = document.createElement('div');
                adminPanel.id = 'admin-panel';
                adminPanel.innerHTML = `
                    <div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-yellow-400 to-yellow-600">
                        <div class="bg-white dark:bg-gray-800 p-8 rounded-lg shadow-2xl w-full max-w-md">
                            <div class="text-center mb-8">
                                <img src="assets/fear.png" alt="Fear Logo" class="h-16 mx-auto mb-4 block dark:hidden" />
                                <img src="assets/fear1.png" alt="Fear Logo" class="h-16 mx-auto mb-4 hidden dark:block" />
                                <h1 class="text-2xl font-bold text-gray-800 dark:text-gray-200">Admin Panel</h1>
                                <p class="text-gray-600 dark:text-gray-400">Enter your credentials to access the admin dashboard</p>
                            </div>
                            
                            <form id="admin-login-form">
                                <div class="mb-6">
                                    <label class="block text-sm font-medium mb-2">Username</label>
                                    <input
                                        type="text"
                                        id="admin-username"
                                        class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700"
                                        required
                                    />
                                </div>
                                <div class="mb-6">
                                    <label class="block text-sm font-medium mb-2">Password</label>
                                    <input
                                        type="password"
                                        id="admin-password"
                                        class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700"
                                        required
                                    />
                                </div>
                                <button
                                    type="submit"
                                    id="admin-login-btn"
                                    class="w-full bg-yellow-500 text-black py-3 rounded-lg font-bold hover:bg-yellow-400 transition duration-300"
                                >
                                    Login to Admin Panel
                                </button>
                            </form>
                            
                            <div class="mt-4 text-center">
                                <a href="/" class="text-sm text-gray-600 dark:text-gray-400 hover:underline">‚Üê Back to Store</a>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Admin Dashboard (hidden initially) -->
                    <div id="admin-dashboard" class="hidden min-h-screen bg-gray-50 dark:bg-gray-900">
                        <!-- Header -->
                        <header class="bg-white dark:bg-gray-800 shadow-md">
                            <div class="container mx-auto px-6 py-4 flex justify-between items-center">
                                <div class="flex items-center space-x-4">
                                    <img src="assets/fear.png" alt="Fear Logo" class="h-10 block dark:hidden" />
                                    <img src="assets/fear1.png" alt="Fear Logo" class="h-10 hidden dark:block" />
                                    <h1 class="text-xl font-bold">Admin Dashboard</h1>
                                </div>
                                <div class="flex items-center space-x-4">
                                    <button onclick="window.location.href='/'" class="text-gray-600 dark:text-gray-300 hover:text-yellow-500">
                                        ‚Üê Back to Store
                                    </button>
                                    <button onclick="adminLogout()" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition duration-300">
                                        Logout
                                    </button>
                                </div>
                            </div>
                        </header>

                        <!-- Navigation Tabs -->
                        <nav class="bg-gray-100 dark:bg-gray-700 border-b">
                            <div class="container mx-auto px-6">
                                <div class="flex space-x-8">
                                    <button onclick="showAdminTab('dashboard')" class="admin-tab py-4 px-2 border-b-2 border-yellow-500 text-yellow-600 dark:text-yellow-400">Dashboard</button>
                                    <button onclick="showAdminTab('orders')" class="admin-tab py-4 px-2 border-b-2 border-transparent hover:border-yellow-500 hover:text-yellow-600">Orders</button>
                                    <button onclick="showAdminTab('users')" class="admin-tab py-4 px-2 border-b-2 border-transparent hover:border-yellow-500 hover:text-yellow-600">Users</button>
                                    <button onclick="showAdminTab('products')" class="admin-tab py-4 px-2 border-b-2 border-transparent hover:border-yellow-500 hover:text-yellow-600">Products</button>
                        <!-- Content -->
                        <main class="container mx-auto px-6 py-8">
                            <!-- Dashboard Tab -->
                            <div id="admin-dashboard-tab" class="admin-tab-content">
                                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">Total Orders</p>
                                                <p class="text-3xl font-bold text-yellow-600" id="total-orders">0</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">Total Revenue</p>
                                                <p class="text-3xl font-bold text-green-600" id="total-revenue">‚Çπ0</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">Pending Orders</p>
                                                <p class="text-3xl font-bold text-orange-600" id="pending-orders">0</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md">
                                        <div class="flex items-center justify-between">
                                            <div>
                                                <p class="text-sm text-gray-600 dark:text-gray-400">New Enquiries</p>
                                                <p class="text-3xl font-bold text-blue-600" id="new-enquiries">0</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                                    <h3 class="text-lg font-bold mb-4">Welcome to FEAR Admin Panel</h3>
                                    <p class="text-gray-600 dark:text-gray-400">Use the navigation tabs above to manage orders, users, products, and customer enquiries.</p>
                                </div>
                            </div>
                                    <button onclick="showAdminTab('enquiries')" class="admin-tab py-4 px-2 border-b-2 border-transparent hover:border-yellow-500 hover:text-yellow-600">Enquiries</button>
                            <!-- Orders Tab -->
                            <div id="admin-orders-tab" class="admin-tab-content hidden">
                                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md">
                                    <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                                        <h2 class="text-2xl font-bold">Order Management</h2>
                                    </div>
                                    <div class="p-6">
                                        <div id="orders-list">Loading orders...</div>
                                    </div>
                                </div>
                            </div>
                                </div>
                            <!-- Users Tab -->
                            <div id="admin-users-tab" class="admin-tab-content hidden">
                                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md">
                                    <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                                        <h2 class="text-2xl font-bold">User Management</h2>
                                    </div>
                                    <div class="p-6">
                                        <div id="users-list">Loading users...</div>
                                    </div>
                                </div>
                            </div>
                            </div>
                            <!-- Products Tab -->
                            <div id="admin-products-tab" class="admin-tab-content hidden">
                                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md">
                                    <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                                        <h2 class="text-2xl font-bold">Product Management</h2>
                                    </div>
                                    <div class="p-6">
                                        <div id="products-list">Loading products...</div>
                                    </div>
                                </div>
                            </div>
                        </nav>
                            <!-- Enquiries Tab -->
                            <div id="admin-enquiries-tab" class="admin-tab-content hidden">
                                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md">
                                    <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                                        <h2 class="text-2xl font-bold">Enquiry Management</h2>
                                    </div>
                                    <div class="p-6">
                                        <div id="enquiries-list">Loading enquiries...</div>
                                    </div>
                                </div>
                            </div>
                        </main>
                    </div>
                `;
                document.body.appendChild(adminPanel);
                
                // Add admin login handler
                document.getElementById('admin-login-form').addEventListener('submit', handleAdminLogin);
            }
            
            adminPanel.style.display = 'block';
        }
        
        async function handleAdminLogin(e) {
            e.preventDefault();
            const username = document.getElementById('admin-username').value;
            const password = document.getElementById('admin-password').value;
            
            try {
                const response = await fetch('/api/admin/login', {
                const response = await fetch(`/api/admin/users/${userId}`, {
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ username, password })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    localStorage.setItem('fearAdminToken', data.token);
                    showAdminDashboard();
                    loadAdminDashboardData();
                } else {
                    alert(data.error);
                }
            } catch (error) {
                alert('Login failed. Please try again.');
            }
        }
        
        function showAdminDashboard() {
            document.querySelector('#admin-panel > div:first-child').style.display = 'none';
            document.getElementById('admin-dashboard').style.display = 'block';
        }
        
        function adminLogout() {
            localStorage.removeItem('fearAdminToken');
            window.location.href = '/admin';
        }
        
        function viewOrder(orderId) {
            alert('Order details for: ' + orderId);
        }
        
        function showAdminTab(tabName) {
            // Update page title
            const titles = {
                'dashboard': 'Dashboard',
                'orders': 'Order Management',
                'users': 'User Management', 
                'products': 'Product Management',
                'enquiries': 'Enquiry Management'
            };
            document.getElementById('adminPageTitle').textContent = titles[tabName] || 'Dashboard';
            
            // Hide all tab contents
            document.querySelectorAll('.admin-tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            const tabs = document.querySelectorAll('.admin-nav-item');
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.classList.remove('border-yellow-500', 'text-yellow-600', 'dark:text-yellow-400');
                tab.classList.add('border-transparent');
            });
            
            // Show selected tab content
            document.getElementById(`admin-${tabName}-tab`).classList.remove('hidden');
            
            // Add active class to selected tab
            event.target.classList.add('border-yellow-500', 'text-yellow-600', 'dark:text-yellow-400');
            event.target.classList.add('active');
            
            // Load data for the selected tab
            loadAdminTabData(tabName);
        }
        
        async function loadAdminDashboardData() {
            try {
                const token = localStorage.getItem('fearAdminToken');
                const response = await fetch(`/api/admin/enquiries/${enquiryId}/status`, {
                    headers: { 'Authorization': `Bearer ${token}` }
                        'Authorization': `Bearer ${token}`
                    }
                });
                
                if (response.ok) {
                    const data = await response.json();
                    document.getElementById('total-orders').textContent = data.totalOrders || 0;
                    document.getElementById('total-revenue').textContent = `‚Çπ${data.totalRevenue || 0}`;
                    document.getElementById('pending-orders').textContent = data.pendingOrders || 0;
                    document.getElementById('new-enquiries').textContent = data.newEnquiries || 0;
                }
            } catch (error) {
                console.error('Failed to load dashboard data:', error);
            }
        }
        
        async function loadAdminTabData(tabName) {
            const token = localStorage.getItem('fearAdminToken');
            
            switch (tabName) {
                case 'orders':
                    try {
                        const response = await fetch('/api/admin/orders', {
                            headers: { 'Authorization': `Bearer ${token}` }
                        });
                        const orders = await response.json();
                        displayOrders(orders);
                    } catch (error) {
                        document.getElementById('orders-list').innerHTML = 'Failed to load orders.';
                    }
                    break;
                    
                case 'users':
                    try {
                        const response = await fetch('/api/admin/users', {
                            headers: { 'Authorization': `Bearer ${token}` }
                        });
                        const users = await response.json();
                        displayUsers(users);
                    } catch (error) {
                        document.getElementById('users-list').innerHTML = 'Failed to load users.';
                    }
                    break;
                    
                case 'products':
                    try {
                        const response = await fetch('/api/products');
                        const products = await response.json();
                        displayProducts(products);
                    } catch (error) {
                        document.getElementById('products-list').innerHTML = 'Failed to load products.';
                    }
                    break;
                    
                case 'enquiries':
                    try {
                        const response = await fetch('/api/admin/enquiries', {
                case 'dashboard':
                    loadDashboard();
                    break;
                            headers: { 'Authorization': `Bearer ${token}` }
                        });
                        const enquiries = await response.json();
                        displayEnquiries(enquiries);
                    } catch (error) {
                        document.getElementById('enquiries-list').innerHTML = 'Failed to load enquiries.';
                    }
                    break;
            }
        }
        
        function displayOrders(orders) {
            const html = orders.length === 0 ? '<p>No orders found.</p>' : `
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50 dark:bg-gray-700">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Order ID</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Customer</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Total</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Status</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Date</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                            ${orders.map(order => `
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">#${order.id.substring(0, 8)}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm">${order.user_email || 'N/A'}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm">‚Çπ${order.total}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm capitalize">${order.status}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm">${new Date(order.created_at).toLocaleDateString()}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
            document.getElementById('orders-list').innerHTML = html;
        }
        
        function displayUsers(users) {
            const html = users.length === 0 ? '<p>No users found.</p>' : `
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50 dark:bg-gray-700">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Name</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Email</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Orders</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Total Spent</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase">Status</th>
                            </tr>
                        </thead>
                        <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                            ${users.map(user => `
                                <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">${user.name}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm">${user.email}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm">${user.order_count || 0}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm">‚Çπ${user.total_spent || 0}</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm capitalize">${user.status}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            `;
            document.getElementById('users-list').innerHTML = html;
        }
        
        function displayProducts(products) {
            const html = products.length === 0 ? '<p>No products found.</p>' : `
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    ${products.map(product => `
                        <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                            <img src="${product.image}" alt="${product.name}" class="w-full h-32 object-cover rounded mb-4">
                            <h4 class="font-bold text-lg mb-2">${product.name}</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">${product.description}</p>
                            <div class="flex justify-between items-center">
                                <span class="text-lg font-bold text-yellow-600">‚Çπ${product.price}</span>
                                <span class="text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded">${product.category}</span>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            document.getElementById('products-list').innerHTML = html;
        }
        
        function displayEnquiries(enquiries) {
            const html = enquiries.length === 0 ? '<p>No enquiries found.</p>' : `
                <div class="space-y-4">
                    ${enquiries.map(enquiry => `
                        <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                            <div class="flex justify-between items-start mb-2">
                                <div>
                                    <h4 class="font-bold">${enquiry.name}</h4>
                                    <p class="text-sm text-gray-600 dark:text-gray-400">${enquiry.email}</p>
                                </div>
                                <span class="text-xs bg-${enquiry.status === 'new' ? 'yellow' : 'green'}-100 text-${enquiry.status === 'new' ? 'yellow' : 'green'}-800 px-2 py-1 rounded capitalize">${enquiry.status}</span>
                            </div>
                            <p class="text-sm mb-2">${enquiry.message}</p>
                            <p class="text-xs text-gray-500">${new Date(enquiry.created_at).toLocaleDateString()}</p>
                        </div>
                    `).join('')}
                </div>
            `;
            document.getElementById('enquiries-list').innerHTML = html;
        }
    });
    </script>
</body>
</html>